<section class="blog-section">
    <div class="container">
        
        <!-- Cas 1 : Affichage de la Vue Détaillée d'un Article -->
        <div *ngIf="selectedPost; else postList" class="post-detail-view fade-in">
            <button class="back-button" (click)="closePost()">
                <!-- SVG pour la flèche de retour -->
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon-back">
                    <line x1="19" y1="12" x2="5" y2="12"></line>
                    <polyline points="12 19 5 12 12 5"></polyline>
                </svg>
                Retour à la liste
            </button>
            
            <article class="blog-post-full">
                <img [src]="selectedPost.imageUrl" [alt]="'Image pour l\'article ' + selectedPost.title" class="detail-image">
                
                <header class="detail-header">
                    <h1 class="detail-title">{{ selectedPost.title }}</h1>
                    <div class="post-meta">
                        <!-- SVG Auteur -->
                        <span class="meta-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            {{ selectedPost.author }}
                        </span>
                        <!-- SVG Date -->
                        <span class="meta-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                            Publié le {{ selectedPost.date }}
                        </span>
                        <span class="meta-item category-badge">{{ selectedPost.category }}</span>
                    </div>
                </header>
                
                <div class="detail-content">
                    <!-- Contenu simulé en texte simple pour cet exemple -->
                    <p class="summary-text">{{ selectedPost.summary }}</p>
                    <hr>
                    <p class="full-content-text">{{ selectedPost.content }}</p>
                    
                    <div class="tag-footer">
                        <span *ngFor="let tag of selectedPost.tags" class="post-tag-detail">{{ tag }}</span>
                    </div>
                </div>
            </article>
        </div>

        <!-- Cas 2 : Affichage de la Vue Liste d'Articles -->
        <ng-template #postList>
            <h2 class="section-title-center">Mon Blog Technique</h2>
            <p class="intro-text">Partage d'expertise sur l'architecture, les bonnes pratiques **Java/Spring** et l'ingénierie **Angular/TypeScript**.</p>
            
            <div class="controls-area">
                <!-- Champ de Recherche -->
                <div class="search-bar">
                    <input 
                        type="text" 
                        placeholder="Rechercher par titre ou mot-clé..." 
                        (input)="onSearchChange($event)"
                        class="search-input"
                    >
                    <!-- SVG Recherche -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </div>
                
                <!-- Filtres par Catégorie -->
                <div class="category-filters" role="tablist">
                    <button 
                        *ngFor="let cat of uniqueCategories" 
                        (click)="filterPosts(cat)" 
                        [class.active]="cat === currentCategory"
                        class="filter-cat-button"
                        role="tab"
                        [attr.aria-selected]="cat === currentCategory"
                    >
                        {{ cat }}
                    </button>
                </div>
            </div>
            
            <!-- Affichage des Articles Filtrés (Responsive Grid) -->
            <div *ngIf="filteredPosts.length > 0; else noResults" class="posts-grid">
                <div 
                    *ngFor="let post of filteredPosts; trackBy: trackByPostId" 
                    class="post-card fade-in-up" 
                    (click)="openPost(post)"
                    role="button"
                    tabindex="0"
                    (keyup.enter)="openPost(post)"
                >
                    <img [src]="post.imageUrl" [alt]="'Image pour l\'article ' + post.title" class="card-image">
                    <div class="card-content">
                        <span class="card-category-badge">{{ post.category }}</span>
                        <h3 class="card-title">{{ post.title }}</h3>
                        <!-- Utilisation de la classe 'clamp' pour limiter le résumé à 3 lignes -->
                        <p class="card-summary line-clamp">{{ post.summary }}</p> 
                        
                        <div class="card-footer">
                            <!-- SVG Temps de lecture -->
                            <span class="read-time">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polyline points="12 6 12 12 16 14"></polyline>
                                </svg>
                                {{ post.readingTime }} min de lecture
                            </span>
                            <button class="read-more-button">
                                Lire l'article 
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon-arrow-right">
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                    <polyline points="12 5 19 12 12 19"></polyline>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Message si aucun résultat n'est trouvé -->
            <ng-template #noResults>
                <div class="no-results">
                    <!-- SVG Avertissement -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                        <line x1="12" y1="9" x2="12" y2="13"></line>
                        <line x1="12" y1="17" x2="12.01" y2="17"></line>
                    </svg>
                    <p>Aucun article trouvé pour les critères de recherche et la catégorie **"{{ currentCategory }}"**.</p>
                </div>
            </ng-template>

        </ng-template>
        
    </div>
</section>
